"use strict";let isStorageSupport=!0;try{localStorage.setItem("tst","tst"),localStorage.removeItem("tst")}catch(e){isStorageSupport=!1}const showPopup=(e,t,r="popup--show")=>{var s=()=>{t.removeEventListener("click",i),document.removeEventListener("keydown",o),e.classList.remove(r)};const o=e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.preventDefault(),s())},i=e=>{e.preventDefault(),s()};e.classList.add(r),t.addEventListener("click",i),document.addEventListener("keydown",o)},popupWriteUs=document.querySelector(".popup--write-us"),buttonWriteUs=document.querySelector(".contacts__link");if(buttonWriteUs&&popupWriteUs){const j=popupWriteUs.querySelector(".popup-close"),k=popupWriteUs.querySelector(".popup__form"),l=popupWriteUs.querySelector("[name=message-name]"),m=popupWriteUs.querySelector("[name=message-email]"),n=popupWriteUs.querySelector("[name=message]"),o=e=>{e.preventDefault(),showPopup(popupWriteUs,j),isStorageSupport?(l.value=localStorage.getItem("popupWriteUsNameField"),m.focus()):l.focus()},p=(e,t="popup--write-us-required")=>{e.classList.remove(t),e.focus(),e.classList.add(t)},q=e=>{l.value?m.value?n.value?isStorageSupport&&localStorage.setItem("popupWriteUsNameField",l.value):(e.preventDefault(),p(n)):(e.preventDefault(),p(m)):(e.preventDefault(),p(l))};n.removeAttribute("required"),l.removeAttribute("required"),m.removeAttribute("required"),buttonWriteUs.addEventListener("click",o),k.addEventListener("submit",q)}const popupMap=document.querySelector(".popup--map"),buttonMap=document.querySelector(".contacts__map");if(buttonMap&&popupMap){const v=popupMap.querySelector(".popup-close"),w=e=>{e.preventDefault(),showPopup(popupMap,v)};buttonMap.addEventListener("click",w)}const popupAddToCart=document.querySelector(".popup--cart"),productsList=document.querySelector(".products__list"),markerCart=document.querySelector(".header__button-cart"),counterCart=document.querySelector(".header__button-cart span"),counterBookmarks=document.querySelector(".header__button-bookmarks span"),popupAddToCartClose=document.querySelector(".popup--cart .popup-close");let bookmarkedProducts=[];const isBookmarked=e=>bookmarkedProducts.includes(e),onProductButtonsClick=e=>{var t=e.target.closest(".product"),r=e.target.closest(".product__button--buy"),s=e.target.closest(".product__button--bookmark");if(r)return e.preventDefault(),showPopup(popupAddToCart,popupAddToCartClose),isStorageSupport?(r=+localStorage.getItem("boughtProductsCount"),localStorage.setItem("boughtProductsCount",++r),counterCart.textContent=r):counterCart.textContent++,void markerCart.classList.add("header__button--red");s&&(e.preventDefault(),isBookmarked(t)||(bookmarkedProducts.push(t),isStorageSupport?(t=+localStorage.getItem("bookmarkedProductsCount"),localStorage.setItem("bookmarkedProductsCount",++t),counterBookmarks.textContent=t):counterBookmarks.textContent++))};if(popupAddToCart&&markerCart&&(productsList.addEventListener("click",onProductButtonsClick),isStorageSupport)){const F=+localStorage.getItem("boughtProductsCount"),G=+localStorage.getItem("bookmarkedProductsCount");G&&(counterBookmarks.textContent=G),F&&(counterCart.textContent=F,markerCart.classList.add("header__button--red"))}var buttonUserEnter,buttonUserReg,buttonUserName,buttonUserExit,buttonUserOrders,buttonUserProfile;document.querySelector(".login-panel")&&(buttonUserEnter=document.querySelector(".login-panel__enter"),buttonUserReg=document.querySelector(".login-panel__registration"),buttonUserName=document.querySelector(".login-panel__user-name"),buttonUserExit=document.querySelector(".login-panel__user-logout"),buttonUserOrders=document.querySelector(".login-panel__user-orders"),buttonUserProfile=document.querySelector(".login-panel__user-profile"),buttonUserEnter.addEventListener("click",function(e){e.preventDefault(),buttonUserEnter.classList.add("login-panel__item--hidden"),buttonUserReg.classList.add("login-panel__item--hidden"),buttonUserName.classList.remove("login-panel__item--hidden"),buttonUserExit.classList.remove("login-panel__item--hidden"),buttonUserOrders.classList.remove("login-panel__item--hidden"),buttonUserProfile.classList.remove("login-panel__item--hidden")}),buttonUserExit.addEventListener("click",function(e){e.preventDefault(),buttonUserEnter.classList.remove("login-panel__item--hidden"),buttonUserReg.classList.remove("login-panel__item--hidden"),buttonUserName.classList.add("login-panel__item--hidden"),buttonUserExit.classList.add("login-panel__item--hidden"),buttonUserOrders.classList.add("login-panel__item--hidden"),buttonUserProfile.classList.add("login-panel__item--hidden")}));var buttonServDelivery,buttonServGuarantee,buttonServCredit,slideServDelivery,slideServGuarantee,slideServCredit,sliderService=document.querySelector(".serv-slider");sliderService&&(buttonServDelivery=sliderService.querySelector("[name=serv-slider__button--delivery]"),buttonServGuarantee=sliderService.querySelector("[name=serv-slider__button--guarantee]"),buttonServCredit=sliderService.querySelector("[name=serv-slider__button--credit]"),slideServDelivery=sliderService.querySelector(".service-slide--delivery"),slideServGuarantee=sliderService.querySelector(".service-slide--guarantee"),slideServCredit=sliderService.querySelector(".service-slide--credit"),buttonServDelivery.addEventListener("click",function(e){e.preventDefault(),buttonServDelivery.classList.add("serv-slider__button--active"),slideServDelivery.classList.add("service-slide--active"),buttonServGuarantee.classList.remove("serv-slider__button--active"),slideServGuarantee.classList.remove("service-slide--active"),buttonServCredit.classList.remove("serv-slider__button--active"),slideServCredit.classList.remove("service-slide--active"),document.activeElement.blur()}),buttonServGuarantee.addEventListener("click",function(e){e.preventDefault(),buttonServGuarantee.classList.add("serv-slider__button--active"),slideServGuarantee.classList.add("service-slide--active"),buttonServDelivery.classList.remove("serv-slider__button--active"),slideServDelivery.classList.remove("service-slide--active"),buttonServCredit.classList.remove("serv-slider__button--active"),slideServCredit.classList.remove("service-slide--active"),document.activeElement.blur()}),buttonServCredit.addEventListener("click",function(e){e.preventDefault(),buttonServCredit.classList.add("serv-slider__button--active"),slideServCredit.classList.add("service-slide--active"),buttonServDelivery.classList.remove("serv-slider__button--active"),slideServDelivery.classList.remove("service-slide--active"),buttonServGuarantee.classList.remove("serv-slider__button--active"),slideServGuarantee.classList.remove("service-slide--active"),document.activeElement.blur()}));var slider=document.querySelector(".pr-slider");if(slider){var slides=slider.querySelectorAll(".pr-slide"),marker=slider.querySelectorAll(".pr-slider__markers-item"),next=slider.querySelector(".pr-slider__button--next"),previous=slider.querySelector(".pr-slider__button--previous"),currentSlideIndex=1;next.addEventListener("click",function(e){e.preventDefault(),nextSlide()}),previous.addEventListener("click",function(e){e.preventDefault(),previousSlide()});for(var index=0;index<marker.length;index++)marker[index].addEventListener("click",clickHandler.bind(null,index));function clickHandler(e,t){if(t.preventDefault(),t.target.classList.contains("pr-slider__markers-item--current"))return!1;slider.querySelector(".pr-slider__markers-item--current").classList.remove("pr-slider__markers-item--current"),t.target.classList.add("pr-slider__markers-item--current"),getSlide(e)}function getSlide(e){try{slider.querySelector(".pr-slide--show").classList.remove("pr-slide--show"),slides[e].classList.add("pr-slide--show"),slider.querySelector(".pr-slider__markers-item--current").classList.remove("pr-slider__markers-item--current"),marker[e].classList.add("pr-slider__markers-item--current"),currentSlideIndex=e}catch(e){console.log(e)}}function nextSlide(){currentSlideIndex<slides.length-1?currentSlideIndex++:currentSlideIndex=0,getSlide(currentSlideIndex)}function previous_slide(){0<currentSlideIndex?currentSlideIndex--:currentSlideIndex=slides.length-1,get_slide(currentSlideIndex)}}
