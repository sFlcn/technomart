"use strict";let isStorageSupport=!0;try{localStorage.setItem("tst","tst"),localStorage.removeItem("tst")}catch(e){isStorageSupport=!1}function isMatches(e,t){return Element.prototype.matches?e.matches(t):e.msMatchesSelector(t)}function getClosest(t,r){if(Element.prototype.closest)return t.closest(r);{let e=t;for(;e;){if(isMatches(e,r))return e;e=e.parentElement}return null}}function showPopup(e,t,r){function o(){t.removeEventListener("click",s),document.removeEventListener("keydown",n),e.classList.remove(r)}function n(e){"Escape"!==e.key&&"Esc"!==e.key||(e.preventDefault(),o())}function s(e){e.preventDefault(),o()}r=r||"popup--show",e.classList.add(r),t.addEventListener("click",s),document.addEventListener("keydown",n)}const popupWriteUs=document.querySelector(".popup--write-us"),buttonWriteUs=document.querySelector(".contacts__link");if(buttonWriteUs&&popupWriteUs){const o=popupWriteUs.querySelector(".popup-close"),p=popupWriteUs.querySelector(".popup__form"),q=popupWriteUs.querySelector("[name=message-name]"),r=popupWriteUs.querySelector("[name=message-email]"),s=popupWriteUs.querySelector("[name=message]");function onWriteUsClick(e){e.preventDefault(),showPopup(popupWriteUs,o),isStorageSupport?(q.value=localStorage.getItem("popupWriteUsNameField"),r.focus()):q.focus()}function flashWriteUsInput(e,t){t=t||"popup--write-us-required",e.classList.remove(t),e.focus(),e.classList.add(t)}function onWriteUsFormSubmit(e){q.value?r.value?s.value?isStorageSupport&&localStorage.setItem("popupWriteUsNameField",q.value):(e.preventDefault(),flashWriteUsInput(s)):(e.preventDefault(),flashWriteUsInput(r)):(e.preventDefault(),flashWriteUsInput(q))}s.removeAttribute("required"),q.removeAttribute("required"),r.removeAttribute("required"),buttonWriteUs.addEventListener("click",onWriteUsClick),p.addEventListener("submit",onWriteUsFormSubmit)}const popupMap=document.querySelector(".popup--map"),buttonMap=document.querySelector(".contacts__map");if(buttonMap&&popupMap){const x=popupMap.querySelector(".popup-close");function onbuttonMapClick(e){e.preventDefault(),showPopup(popupMap,x)}buttonMap.addEventListener("click",onbuttonMapClick)}const popupAddToCart=document.querySelector(".popup--cart"),popupAddToCartClose=document.querySelector(".popup--cart .popup-close"),productsList=document.querySelector(".products__list"),markerCart=document.querySelector(".header__button-cart"),counterCart=document.querySelector(".header__button-cart span"),counterBookmarks=document.querySelector(".header__button-bookmarks span");if(popupAddToCart&&markerCart){let n=[];function isBookmarked(t){for(let e=0;e<n.length;e++)if(n[e]===t)return!0;return!1}function onProductButtonsClick(e){var t=getClosest(e.target,".product"),r=getClosest(e.target,".product__button--buy"),o=getClosest(e.target,".product__button--bookmark");if(r)return e.preventDefault(),showPopup(popupAddToCart,popupAddToCartClose),isStorageSupport?(r=+localStorage.getItem("boughtProductsCount"),localStorage.setItem("boughtProductsCount",++r),counterCart.textContent=r):counterCart.textContent++,void markerCart.classList.add("header__button--red");o&&(e.preventDefault(),isBookmarked(t)||(n.push(t),isStorageSupport?(t=+localStorage.getItem("bookmarkedProductsCount"),localStorage.setItem("bookmarkedProductsCount",++t),counterBookmarks.textContent=t):counterBookmarks.textContent++))}if(isStorageSupport){const I=+localStorage.getItem("boughtProductsCount"),J=+localStorage.getItem("bookmarkedProductsCount");J&&(counterBookmarks.textContent=J),I&&(counterCart.textContent=I,markerCart.classList.add("header__button--red"))}productsList.addEventListener("click",onProductButtonsClick)}const loginPanelEnter=document.querySelector(".login-panel__enter-link"),loginPanelExit=document.querySelector(".login-panel__user-logout a");if(loginPanelEnter&&loginPanelExit){const K=document.querySelectorAll(".login-panel__list");function onLoginPanelClick(e){e.preventDefault();for(let e=0;e<K.length;e++)K[e].classList.toggle("login-panel__list--hidden")}loginPanelEnter.addEventListener("click",onLoginPanelClick),loginPanelExit.addEventListener("click",onLoginPanelClick)}const sliderService=document.querySelector(".serv-slider");if(sliderService){const N=sliderService.querySelectorAll(".serv-slider__button"),O=sliderService.querySelectorAll(".service-slide");function onServiceButtonCLick(e){e.preventDefault();var t=e.target.dataset.type;let r,o;for(let e=0;e<N.length;e++)N[e].classList.remove("serv-slider__button--active"),O[e].classList.remove("service-slide--active"),O[e].dataset.type===t&&(r=O[e]),N[e].dataset.type===t&&(o=N[e]);r.classList.add("service-slide--active"),o.classList.add("serv-slider__button--active"),document.activeElement.blur()}for(let e=0;e<N.length;e++)N[e].addEventListener("click",onServiceButtonCLick)}const slider=document.querySelector(".pr-slider");if(slider){const V=slider.querySelectorAll(".pr-slide"),W=slider.querySelector(".pr-slider__markers-list"),X=W.querySelectorAll(".pr-slider__markers-item"),Y=slider.querySelector(".pr-slider__button--next"),Z=slider.querySelector(".pr-slider__button--previous");let r=1;function updateMarkers(e){for(let e=0;e<X.length;e++)X[e].classList.remove("pr-slider__markers-item--current");X[e].classList.add("pr-slider__markers-item--current")}function onMarkerClick(e){const t=getClosest(e.target,".pr-slider__markers-item");t&&!t.classList.contains("pr-slider__markers-item--current")&&(e.preventDefault(),r=+t.dataset.markern,updateMarkers(r),showSlide(r))}function onNextClick(e){e.preventDefault(),r>=V.length-1?r=0:r++,updateMarkers(r),showSlide(r)}function onPrevClick(e){e.preventDefault(),r<=0?r=V.length-1:r--,updateMarkers(r),showSlide(r)}function showSlide(e){for(let e=0;e<V.length;e++)V[e].classList.remove("pr-slide--show");V[e].classList.add("pr-slide--show")}Y.addEventListener("click",onNextClick),Z.addEventListener("click",onPrevClick),W.addEventListener("click",onMarkerClick)}
