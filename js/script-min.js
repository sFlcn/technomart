"use strict";let isStorageSupport=!0;try{localStorage.setItem("tst","tst"),localStorage.removeItem("tst")}catch(e){isStorageSupport=!1}const showPopup=(e,t,r="popup--show")=>{var o=()=>{t.removeEventListener("click",a),document.removeEventListener("keydown",s),e.classList.remove(r)};const s=e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.preventDefault(),o())},a=e=>{e.preventDefault(),o()};e.classList.add(r),t.addEventListener("click",a),document.addEventListener("keydown",s)},popupWriteUs=document.querySelector(".popup--write-us"),buttonWriteUs=document.querySelector(".contacts__link");if(buttonWriteUs&&popupWriteUs){const j=popupWriteUs.querySelector(".popup-close"),k=popupWriteUs.querySelector(".popup__form"),l=popupWriteUs.querySelector("[name=message-name]"),m=popupWriteUs.querySelector("[name=message-email]"),n=popupWriteUs.querySelector("[name=message]"),o=e=>{e.preventDefault(),showPopup(popupWriteUs,j),isStorageSupport?(l.value=localStorage.getItem("popupWriteUsNameField"),m.focus()):l.focus()},p=(e,t="popup--write-us-required")=>{e.classList.remove(t),e.focus(),e.classList.add(t)},q=e=>{l.value?m.value?n.value?isStorageSupport&&localStorage.setItem("popupWriteUsNameField",l.value):(e.preventDefault(),p(n)):(e.preventDefault(),p(m)):(e.preventDefault(),p(l))};n.removeAttribute("required"),l.removeAttribute("required"),m.removeAttribute("required"),buttonWriteUs.addEventListener("click",o),k.addEventListener("submit",q)}const popupMap=document.querySelector(".popup--map"),buttonMap=document.querySelector(".contacts__map");if(buttonMap&&popupMap){const v=popupMap.querySelector(".popup-close"),w=e=>{e.preventDefault(),showPopup(popupMap,v)};buttonMap.addEventListener("click",w)}const popupAddToCart=document.querySelector(".popup--cart"),productsList=document.querySelector(".products__list"),markerCart=document.querySelector(".header__button-cart"),counterCart=document.querySelector(".header__button-cart span"),counterBookmarks=document.querySelector(".header__button-bookmarks span"),popupAddToCartClose=document.querySelector(".popup--cart .popup-close");let bookmarkedProducts=[];const isBookmarked=e=>bookmarkedProducts.includes(e),onProductButtonsClick=e=>{var t=e.target.closest(".product"),r=e.target.closest(".product__button--buy"),o=e.target.closest(".product__button--bookmark");if(r)return e.preventDefault(),showPopup(popupAddToCart,popupAddToCartClose),isStorageSupport?(r=+localStorage.getItem("boughtProductsCount"),localStorage.setItem("boughtProductsCount",++r),counterCart.textContent=r):counterCart.textContent++,void markerCart.classList.add("header__button--red");o&&(e.preventDefault(),isBookmarked(t)||(bookmarkedProducts.push(t),isStorageSupport?(t=+localStorage.getItem("bookmarkedProductsCount"),localStorage.setItem("bookmarkedProductsCount",++t),counterBookmarks.textContent=t):counterBookmarks.textContent++))};if(popupAddToCart&&markerCart&&(productsList.addEventListener("click",onProductButtonsClick),isStorageSupport)){const F=+localStorage.getItem("boughtProductsCount"),G=+localStorage.getItem("bookmarkedProductsCount");G&&(counterBookmarks.textContent=G),F&&(counterCart.textContent=F,markerCart.classList.add("header__button--red"))}const loginPanel=document.querySelector(".login-panel"),onLoginPanelClick=e=>{const t=loginPanel.querySelectorAll(".login-panel__list");var r=e.target.closest(".login-panel__enter a"),o=e.target.closest(".login-panel__user-logout a");(r||o)&&(e.preventDefault(),t.forEach(e=>e.classList.toggle("login-panel__list--hidden")))};loginPanel&&loginPanel.addEventListener("click",onLoginPanelClick);const sliderService=document.querySelector(".serv-slider"),onServicesClick=e=>{const t=sliderService.querySelectorAll(".serv-slider__button"),r=sliderService.querySelectorAll(".service-slide"),o=e.target.closest(".serv-slider__button");var s;o&&(s=o.dataset.type,t.forEach(e=>e.classList.remove("serv-slider__button--active")),r.forEach(e=>e.classList.remove("service-slide--active")),o.classList.add("serv-slider__button--active"),r.forEach(e=>{e.dataset.type===s&&e.classList.add("service-slide--active")}),document.activeElement.blur())};sliderService&&sliderService.addEventListener("click",onServicesClick);const slider=document.querySelector(".pr-slider");if(slider){const U=slider.querySelectorAll(".pr-slide"),V=slider.querySelector(".pr-slider__markers-list"),W=V.querySelectorAll(".pr-slider__markers-item"),X=slider.querySelector(".pr-slider__button--next"),Y=slider.querySelector(".pr-slider__button--previous");let r=1;const $=e=>{W.forEach(e=>{e.classList.remove("pr-slider__markers-item--current")}),W[e].classList.add("pr-slider__markers-item--current")},_=e=>{const t=e.target.closest(".pr-slider__markers-item");t&&!t.classList.contains("pr-slider__markers-item--current")&&(e.preventDefault(),r=+t.dataset.markern,$(r),ca(r))},aa=e=>{e.preventDefault(),r>=U.length-1?r=0:r++,$(r),ca(r)},ba=e=>{e.preventDefault(),r<=0?r=U.length-1:r--,$(r),ca(r)},ca=e=>{U.forEach(e=>{e.classList.remove("pr-slide--show")}),U[e].classList.add("pr-slide--show")};X.addEventListener("click",aa),Y.addEventListener("click",ba),V.addEventListener("click",_)}
